<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QuickText</title>
  <style>
    .draggable_modal--positionedContainer--8AmbN.js-fullscreen-prevent-event-capture {
      height: 560px !important;
    }

    .draggable_modal--frame--LKZW-,
    iframe#plugin-iframe-in-modal {
      height: 560px !important;
    }


    body {
      margin: 0;
      background: #303030;
      height: 100vh;
    }

    #mainScreen button {
      border: none;
      width: 100%;
      padding: 8px 12px;
      border-bottom: 1px solid #222222;
      text-align: left;
      background: 0;
      color: white;
    }

    #textareaView {
      height: -webkit-fill-available;
      display: flex;
      padding: 1em;
      flex-direction: column;
      gap: 0.4rem;
      overflow: hidden;
    }

    .controller {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }


    .controller button {
      width: 50px;
      background: #000000;
      color: white;
      height: 42px;
    }

    #backButtonTextarea {
      background: 0;
      border-style: hidden;
      padding: 0;
    }

    #textArea {
      display: flex;
      height: 66%;
      position: relative;
    }

    span#clearTextbox {
      position: absolute;
      right: 10px;
      cursor: pointer;
      top: 10px;
      display: none;
    }

    #textareaView textarea {
      border: 1px solid #222222;
      width: 100%;
      background: 0;
      color: white;
      padding: 0.4rem;
    }

    svg {
      width: 16px;
      height: auto;
      fill: #fff;
    }

    #caseChnage svg {
      width: 26px;
    }

    #clearTextbox .svg {
      fill: #fff;
      width: 12px;
    }
  </style>
</head>

<body>
  <div id="textareaView">
    <div class="controller">
      <div>
        <button id="pasteToTextbox" title="Layer to Textbox (Please Use this ðŸ˜•| Insted of copy-paste)"><svg width="512"
            height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M236.027 455.726C247.058 466.758 264.942 466.758 275.972 455.726L455.727 275.961C466.758 264.93 466.758 247.045 455.727 236.013C444.696 224.982 426.812 224.982 415.782 236.013L256 395.804L96.2182 236.013C85.1877 224.982 67.3037 224.982 56.273 236.013C45.2423 247.045 45.2423 264.93 56.273 275.961L236.027 455.726ZM256 48C240.4 48 227.754 60.646 227.754 76.2457V435.752H284.246V76.2457C284.246 60.6461 271.6 48 256 48V48Z"
              fill="white" />
          </svg>

        </button>
        <button id="pasteToFigma" title="Textbox to Layer (Again! Please Use this ðŸ˜•| Insted of copy-paste)"><svg
            width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M455.726 275.973C466.758 264.942 466.758 247.058 455.726 236.028L275.961 56.2733C264.93 45.2422 247.045 45.2422 236.013 56.2733C224.982 67.3038 224.982 85.1878 236.013 96.2183L395.804 256L236.013 415.782C224.982 426.812 224.982 444.696 236.013 455.727C247.045 466.758 264.93 466.758 275.961 455.727L455.726 275.973ZM48 256C48 271.6 60.646 284.246 76.2457 284.246L435.752 284.246L435.752 227.754L76.2457 227.754C60.646 227.754 48 240.4 48 256V256Z"
              fill="white" />
          </svg>

        </button>
        <button id="copyButton" title="Textbox to Clipboard (Copy & paste in whole universe ðŸŒŒ)"><svg width="512"
            height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M440 48C426.745 48 416 58.7452 416 72V353.444C416 387.993 387.993 416 353.444 416L72 416C58.7452 416 48 426.745 48 440C48 453.255 58.7452 464 72 464L440 464C453.255 464 464 453.255 464 440V72C464 58.7452 453.255 48 440 48Z"
              fill="white" />
            <rect x="48" y="48" width="320" height="320" rx="48.012" fill="white" />
          </svg>

        </button>
      </div>
    </div>
    <div id="textArea">
      <textarea id="inputText" placeholder="Enter text by selcting / pasting & obviously manually ðŸ˜"
        type="search"></textarea>
      <span id="clearTextbox"><svg class="svg" xmlns="http://www.w3.org/2000/svg" width="12" height="12"
          viewBox="0 0 12 12">
          <path fill="#FFF" fill-opacity="1" fill-rule="nonzero" stroke="none"
            d="m6 5.293 4.789-4.79.707.708-4.79 4.79 4.79 4.789-.707.707-4.79-4.79-4.789 4.79-.707-.707L5.293 6 .502 1.211 1.21.504 6 5.294z">
          </path>
        </svg></span>
    </div>

    <div class="controller">
      <div id="caseChnage">
        <button id="uppercaseButton" title="to Upper Case (Like Parents ðŸ‘©â€ðŸ¤â€ðŸ§‘)"><svg width="512" height="512"
            viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M181.737 147.845V289.435C181.737 305.487 181.214 316.784 180.167 323.327C179.12 329.783 176.023 336.457 170.876 343.349C165.729 350.153 158.924 355.344 150.462 358.921C142.087 362.41 132.185 364.155 120.757 364.155C108.107 364.155 96.9404 362.062 87.2568 357.874C77.5732 353.687 70.3324 348.234 65.5342 341.517C60.736 334.799 57.9007 327.733 57.0283 320.317C56.1559 312.815 55.7197 297.112 55.7197 273.208V147.845H110.812V306.708C110.812 315.955 111.291 321.888 112.251 324.505C113.298 327.035 115.348 328.3 118.401 328.3C121.891 328.3 124.116 326.904 125.075 324.112C126.122 321.233 126.646 314.516 126.646 303.96V147.845H181.737Z"
              fill="white" />
            <path
              d="M203.067 147.845H258.552C273.557 147.845 285.073 149.022 293.099 151.378C301.212 153.733 307.275 157.136 311.288 161.585C315.388 166.034 318.136 171.443 319.532 177.812C321.015 184.093 321.757 193.864 321.757 207.124V225.575C321.757 239.097 320.361 248.955 317.569 255.149C314.778 261.343 309.631 266.098 302.128 269.413C294.713 272.728 284.985 274.386 272.946 274.386H258.159V359.706H203.067V147.845ZM258.159 184.093V238.007C259.729 238.094 261.082 238.138 262.216 238.138C267.276 238.138 270.765 236.916 272.685 234.474C274.691 231.944 275.694 226.753 275.694 218.901V201.497C275.694 194.256 274.56 189.545 272.292 187.364C270.024 185.183 265.313 184.093 258.159 184.093Z"
              fill="white" />
            <path
              d="M337.591 147.845H393.075C408.08 147.845 419.596 149.022 427.622 151.378C435.735 153.733 441.799 157.136 445.812 161.585C449.912 166.034 452.66 171.443 454.056 177.812C455.539 184.093 456.28 193.864 456.28 207.124V225.575C456.28 239.097 454.884 248.955 452.093 255.149C449.301 261.343 444.154 266.098 436.651 269.413C429.236 272.728 419.509 274.386 407.47 274.386H392.683V359.706H337.591V147.845ZM392.683 184.093V238.007C394.253 238.094 395.605 238.138 396.739 238.138C401.799 238.138 405.289 236.916 407.208 234.474C409.215 231.944 410.218 226.753 410.218 218.901V201.497C410.218 194.256 409.084 189.545 406.815 187.364C404.547 185.183 399.836 184.093 392.683 184.093Z"
              fill="white" />
          </svg></button>
        <button id="lowercaseButton" title="to Lower Case (Like Small Kids ðŸ‘¶)"><svg width="512" height="512"
            viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M119.71 148.499V360.36H65.2725V148.499H119.71Z" fill="white" />
            <path
              d="M258.421 247.69V290.22C258.421 305.836 257.636 317.308 256.065 324.636C254.495 331.877 251.136 338.681 245.989 345.05C240.842 351.331 234.212 355.998 226.099 359.052C218.073 362.018 208.825 363.501 198.356 363.501C186.666 363.501 176.765 362.236 168.651 359.706C160.538 357.089 154.213 353.207 149.677 348.06C145.228 342.825 142.043 336.544 140.124 329.216C138.205 321.8 137.245 310.721 137.245 295.978V251.485C137.245 235.346 138.99 222.74 142.479 213.667C145.969 204.594 152.25 197.31 161.323 191.813C170.396 186.317 181.999 183.569 196.132 183.569C207.996 183.569 218.16 185.358 226.622 188.935C235.172 192.424 241.758 197.004 246.382 202.675C251.006 208.345 254.146 214.19 255.804 220.21C257.549 226.229 258.421 235.39 258.421 247.69ZM205.554 234.604C205.554 225.706 205.074 220.123 204.114 217.854C203.155 215.499 201.104 214.321 197.964 214.321C194.823 214.321 192.729 215.499 191.683 217.854C190.636 220.123 190.112 225.706 190.112 234.604V312.989C190.112 321.19 190.636 326.555 191.683 329.085C192.729 331.528 194.78 332.749 197.833 332.749C200.974 332.749 203.024 331.615 203.983 329.347C205.03 327.078 205.554 322.193 205.554 314.69V234.604Z"
              fill="white" />
            <path
              d="M446.728 186.71L425.659 360.36H368.212C365.071 339.161 361.451 311.244 357.351 276.61C355.955 291.79 353.992 307.144 351.462 322.673L345.573 360.36H288.126L265.749 186.71H311.288C311.637 191.246 315.476 224.354 322.804 286.032C323.327 279.751 327.253 246.644 334.581 186.71H378.419L389.149 286.032C390.807 257.069 394.82 223.961 401.188 186.71H446.728Z"
              fill="white" />
          </svg>

        </button>
        <button id="sentenceCaseButton" title="to Sentance Case (Like United Family ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘§)"><svg width="512"
            height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M176.896 214.19H125.729V198.487C125.729 191.159 125.075 186.492 123.767 184.485C122.458 182.479 120.277 181.476 117.224 181.476C113.909 181.476 111.379 182.828 109.634 185.532C107.976 188.237 107.147 192.337 107.147 197.833C107.147 204.899 108.107 210.221 110.026 213.798C111.858 217.375 117.049 221.693 125.599 226.753C150.113 241.322 165.554 253.274 171.923 262.608C178.291 271.943 181.476 286.992 181.476 307.755C181.476 322.847 179.687 333.97 176.11 341.124C172.621 348.278 165.816 354.297 155.696 359.183C145.576 363.981 133.799 366.38 120.364 366.38C105.621 366.38 93.0146 363.588 82.5459 358.005C72.1644 352.422 65.3597 345.312 62.1318 336.675C58.904 328.038 57.29 315.781 57.29 299.903V286.032H108.456V311.812C108.456 319.75 109.154 324.854 110.55 327.122C112.033 329.39 114.606 330.524 118.271 330.524C121.935 330.524 124.639 329.085 126.384 326.206C128.216 323.327 129.132 319.052 129.132 313.382C129.132 300.907 127.431 292.75 124.028 288.911C120.539 285.073 111.946 278.66 98.249 269.675C84.5524 260.602 75.4795 254.015 71.0303 249.915C66.5811 245.815 62.8734 240.144 59.9072 232.903C57.0283 225.662 55.5889 216.415 55.5889 205.161C55.5889 188.935 57.639 177.07 61.7393 169.567C65.9268 162.065 72.6442 156.22 81.8916 152.032C91.139 147.757 102.306 145.62 115.392 145.62C129.699 145.62 141.869 147.932 151.901 152.556C162.021 157.179 168.695 163.024 171.923 170.091C175.238 177.07 176.896 188.978 176.896 205.815V214.19Z"
              fill="white" />
            <path
              d="M317.046 278.181H248.606V315.737C248.606 323.589 249.174 328.649 250.308 330.917C251.442 333.185 253.623 334.319 256.851 334.319C260.864 334.319 263.524 332.836 264.833 329.87C266.229 326.817 266.927 320.972 266.927 312.335V289.435H317.046V302.259C317.046 312.989 316.348 321.233 314.952 326.991C313.644 332.749 310.503 338.899 305.53 345.442C300.558 351.985 294.233 356.914 286.556 360.229C278.966 363.457 269.413 365.071 257.897 365.071C246.731 365.071 236.873 363.457 228.323 360.229C219.774 357.002 213.1 352.596 208.302 347.013C203.591 341.342 200.319 335.148 198.487 328.431C196.655 321.626 195.739 311.768 195.739 298.856V248.214C195.739 233.034 197.789 221.082 201.89 212.358C205.99 203.547 212.707 196.83 222.042 192.206C231.377 187.495 242.107 185.14 254.233 185.14C269.064 185.14 281.278 187.975 290.874 193.646C300.558 199.229 307.319 206.688 311.157 216.022C315.083 225.27 317.046 238.312 317.046 255.149V278.181ZM264.048 249.915V237.222C264.048 228.236 263.568 222.435 262.608 219.817C261.649 217.2 259.686 215.892 256.72 215.892C253.056 215.892 250.787 217.026 249.915 219.294C249.043 221.475 248.606 227.451 248.606 237.222V249.915H264.048Z"
              fill="white" />
            <path
              d="M388.233 188.28L387.317 204.245C391.156 197.877 395.823 193.122 401.319 189.981C406.903 186.754 413.315 185.14 420.556 185.14C429.629 185.14 437.044 187.277 442.802 191.552C448.56 195.826 452.267 201.235 453.925 207.778C455.582 214.234 456.411 225.052 456.411 240.231V361.931H403.544V241.671C403.544 229.719 403.151 222.435 402.366 219.817C401.581 217.2 399.4 215.892 395.823 215.892C392.072 215.892 389.716 217.418 388.757 220.472C387.797 223.438 387.317 231.464 387.317 244.55V361.931H334.45V188.28H388.233Z"
              fill="white" />
          </svg>
        </button>
        <button id="capitalizeFirstButton" title="to Capital First (Like Divided Family ðŸ‘¨â€ðŸ‘¦â€ðŸ‘¦)"><svg width="512"
            height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M197.048 242.456H141.956V205.554C141.956 194.823 141.345 188.149 140.124 185.532C138.99 182.828 136.416 181.476 132.403 181.476C127.867 181.476 124.988 183.09 123.767 186.317C122.545 189.545 121.935 196.524 121.935 207.255V305.661C121.935 315.955 122.545 322.673 123.767 325.813C124.988 328.954 127.736 330.524 132.011 330.524C136.111 330.524 138.772 328.954 139.993 325.813C141.302 322.673 141.956 315.301 141.956 303.698V277.134H197.048V285.378C197.048 307.275 195.478 322.804 192.337 331.964C189.284 341.124 182.435 349.15 171.792 356.042C161.236 362.934 148.194 366.38 132.665 366.38C116.526 366.38 103.222 363.457 92.7529 357.612C82.2842 351.767 75.3486 343.698 71.9463 333.403C68.5439 323.022 66.8428 307.45 66.8428 286.687V224.79C66.8428 209.523 67.3662 198.095 68.4131 190.505C69.46 182.828 72.557 175.456 77.7041 168.39C82.9385 161.323 90.1357 155.784 99.2959 151.771C108.543 147.67 119.143 145.62 131.095 145.62C147.321 145.62 160.713 148.761 171.269 155.042C181.825 161.323 188.76 169.175 192.075 178.597C195.39 187.931 197.048 202.5 197.048 222.304V242.456Z"
              fill="white" />
            <path
              d="M262.478 255.542H212.882V243.896C212.882 230.461 214.409 220.123 217.462 212.882C220.603 205.554 226.84 199.098 236.175 193.515C245.509 187.931 257.636 185.14 272.554 185.14C290.438 185.14 303.916 188.324 312.989 194.692C322.062 200.974 327.515 208.738 329.347 217.985C331.179 227.146 332.095 246.076 332.095 274.778V361.931H280.667V346.489C277.439 352.683 273.252 357.351 268.104 360.491C263.045 363.545 256.981 365.071 249.915 365.071C240.668 365.071 232.162 362.498 224.397 357.351C216.72 352.116 212.882 340.731 212.882 323.196V308.933C212.882 295.934 214.932 287.079 219.032 282.368C223.132 277.657 233.296 272.161 249.522 265.88C266.883 259.075 276.174 254.495 277.396 252.14C278.617 249.784 279.228 244.986 279.228 237.745C279.228 228.672 278.53 222.784 277.134 220.079C275.825 217.287 273.601 215.892 270.46 215.892C266.883 215.892 264.659 217.069 263.786 219.425C262.914 221.693 262.478 227.669 262.478 237.353V255.542ZM279.228 279.358C270.765 285.552 265.836 290.743 264.44 294.931C263.132 299.118 262.478 305.138 262.478 312.989C262.478 321.975 263.045 327.776 264.179 330.394C265.4 333.011 267.756 334.319 271.245 334.319C274.56 334.319 276.698 333.316 277.657 331.31C278.704 329.216 279.228 323.807 279.228 315.083V279.358Z"
              fill="white" />
            <path d="M351.854 150.069H445.157V192.468H406.946V232.642H440.97V272.946H406.946V361.931H351.854V150.069Z"
              fill="white" />
          </svg>
        </button>
        <button id="inverseCaseButton" title="to Inverse (Like to braiwash siblings ðŸ”€)"><svg width="512" height="512"
            viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M146.405 150.069V177.681H91.9678V150.069H146.405ZM146.405 188.28V361.931H91.9678V188.28H146.405Z"
              fill="white" />
            <path
              d="M290.089 150.069V361.931H241.802L213.144 265.618V361.931H167.081V150.069H213.144L244.026 245.466V150.069H290.089Z"
              fill="white" />
            <path
              d="M420.032 188.28L395.3 361.931H326.337L299.772 188.28H347.013L361.8 314.952C362.934 305.705 364.853 283.022 367.558 246.905C369.128 226.753 370.873 207.211 372.792 188.28H420.032Z"
              fill="white" />
          </svg>
        </button>
      </div>
      <div>
        <button id="breakToIndividual" title="Break to individual line"><svg width="512" height="512"
            viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M48 64C48 55.1634 55.1634 48 64 48H358C366.837 48 374 55.1634 374 64V122.667C374 140.34 359.673 154.667 342 154.667H80C62.3269 154.667 48 140.34 48 122.667V64Z"
              fill="white" />
            <path
              d="M48 218.667C48 209.83 55.1634 202.667 64 202.667H358C366.837 202.667 374 209.83 374 218.667V277.334C374 295.007 359.673 309.334 342 309.334H80C62.3269 309.334 48 295.007 48 277.334V218.667Z"
              fill="white" />
            <path
              d="M48 373.333C48 364.496 55.1634 357.333 64 357.333H358C366.837 357.333 374 364.496 374 373.333V432C374 449.673 359.673 464 342 464H80C62.3269 464 48 449.673 48 432V373.333Z"
              fill="white" />
            <rect x="422" y="48" width="42" height="416" rx="16" fill="white" />
          </svg>
        </button>
        <button id="createTextLayersButton"
          title="Breaklines to Individual Text Layer (You have to be lazy enough to use this ðŸ˜›)"><svg width="512"
            height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M48 64C48 55.1634 55.1634 48 64 48H448C456.837 48 464 55.1634 464 64V122.667C464 140.34 449.673 154.667 432 154.667H80C62.3269 154.667 48 140.34 48 122.667V64Z"
              fill="white" />
            <path
              d="M48 218.667C48 209.83 55.1634 202.667 64 202.667H448C456.837 202.667 464 209.83 464 218.667V277.334C464 295.007 449.673 309.334 432 309.334H80C62.3269 309.334 48 295.007 48 277.334V218.667Z"
              fill="white" />
            <path
              d="M48 373.333C48 364.496 55.1634 357.333 64 357.333H448C456.837 357.333 464 364.496 464 373.333V432C464 449.673 449.673 464 432 464H80C62.3269 464 48 449.673 48 432V373.333Z"
              fill="white" />
          </svg>

        </button>
      </div>
    </div>

  </div>


  <script>

    let inputText = document.getElementById('inputText');
    clearButton = document.getElementById("clearTextbox");

    window.onload = function () {
      const inputText = document.getElementById('inputText');
      if (inputText) {
        inputText.focus(); // Focus on the textarea when the plugin is loaded
      }
    };
    document.getElementById('pasteToTextbox').onclick = () => {
      parent.postMessage({ pluginMessage: { type: 'pasteToTextbox' } }, '*');
    };

    window.onmessage = event => {
      const msg = event.data.pluginMessage;
      if (msg.type === 'updateInputText') {
        const inputText = document.getElementById('inputText');
        if (inputText) {
          inputText.value = msg.value;
        }
      }
    };

    inputText.addEventListener('keydown', event => {
      // Check if Ctrl and Backspace keys are pressed simultaneously
      if (event.ctrlKey && event.key === 'Backspace') {
        // Clear the input text and hide the clear button
        inputText.value = '';
        clearButton.style.display = 'none';
      }
    });

    clearButton.addEventListener('click', () => {
      inputText.value = '';
      clearButton.style.display = 'none';
    });

    inputText.addEventListener('input', () => {
      if (inputText.value.trim() !== '') {
        clearButton.style.display = 'inline'; // Show the clear button
      } else {
        clearButton.style.display = 'none';
      }
    });

    document.getElementById('uppercaseButton').onclick = () => {
      manipulateText((text) => text.toUpperCase());
    };

    document.getElementById('lowercaseButton').onclick = () => {
      manipulateText((text) => text.toLowerCase());
    };

    document.getElementById('capitalizeFirstButton').onclick = () => {
      manipulateText((text) => text.toLowerCase());
      manipulateText((text) => text.replace(/^.|\s\S/g, (match) => match.toUpperCase()));
    };

    document.getElementById('sentenceCaseButton').onclick = () => {
      manipulateText((text) => text.toLowerCase());
      manipulateText((text) => text.replace(/(^\w|\.\s\w)/g, (match) => match.toUpperCase()));

    };

    document.getElementById('inverseCaseButton').onclick = () => {
      // Toggle the case of each character in the text content
      const manipulatedText = inputText.value.split('').map(char => {
        if (char === char.toUpperCase()) {
          return char.toLowerCase();
        } else {
          return char.toUpperCase();
        }
      }).join('');

      // Set the manipulated text back to the input element
      inputText.value = manipulatedText;
    };

    document.getElementById('breakToIndividual').onclick = () => {
      const textValue = inputText.value.trim(); // Remove leading and trailing whitespaces

      // Split the text into an array of words
      const wordsArray = textValue.split(/\s+/);

      // Join the words array back together with newline characters
      const newTextValue = wordsArray.join('\n');

      // Set the modified text value back to the input element
      inputText.value = newTextValue;
    };




    document.getElementById('pasteToFigma').onclick = () => {
      parent.postMessage({ pluginMessage: { type: 'paste-text', text: inputText.value } }, '*');
    };

    document.getElementById('copyButton').onclick = () => {
      inputText.select();
      document.execCommand('copy');
    };

    document.getElementById('createTextLayersButton').onclick = () => {
      parent.postMessage({ pluginMessage: { type: 'createTextLayer', text: inputText.value } }, '*');
    };


    // Function to manipulate text based on a given function
    function manipulateText(manipulationFunction) {
      inputText.value = manipulationFunction(inputText.value);
    }



  </script>
</body>

</html>